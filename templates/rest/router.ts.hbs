/**
 * {{pascalCase name}} REST Router
 * Generated by OpenGenerator
 */

import { Router } from '{{adapterImport}}'
import { {{pascalCase name}}Controller } from './{{kebabCase name}}.controller'
import { {{pascalCase name}}Service } from './{{kebabCase name}}.service'
{{#if auth}}
import { authMiddleware } from '../middleware/auth'
{{/if}}
{{#if validation}}
import { validate } from '../middleware/validate'
import { {{camelCase name}}Schema } from './{{kebabCase name}}.schema'
{{/if}}

const router = Router()
const service = new {{pascalCase name}}Service()
const controller = new {{pascalCase name}}Controller(service)

/**
 * @openapi
 * /{{pluralize (kebabCase name)}}:
 *   get:
 *     summary: List all {{pluralize (lowerCase name)}}
 *     tags: [{{pascalCase name}}]
 *     responses:
 *       200:
 *         description: List of {{pluralize (lowerCase name)}}
 */
router.get(
  '/',
  {{#if auth}}authMiddleware(),{{/if}}
  controller.findAll.bind(controller)
)

/**
 * @openapi
 * /{{pluralize (kebabCase name)}}/{id}:
 *   get:
 *     summary: Get {{lowerCase name}} by ID
 *     tags: [{{pascalCase name}}]
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     responses:
 *       200:
 *         description: {{pascalCase name}} found
 *       404:
 *         description: {{pascalCase name}} not found
 */
router.get(
  '/:id',
  {{#if auth}}authMiddleware(),{{/if}}
  controller.findById.bind(controller)
)

/**
 * @openapi
 * /{{pluralize (kebabCase name)}}:
 *   post:
 *     summary: Create new {{lowerCase name}}
 *     tags: [{{pascalCase name}}]
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/Create{{pascalCase name}}'
 *     responses:
 *       201:
 *         description: {{pascalCase name}} created
 */
router.post(
  '/',
  {{#if auth}}authMiddleware(),{{/if}}
  {{#if validation}}validate({{camelCase name}}Schema.create),{{/if}}
  controller.create.bind(controller)
)

/**
 * @openapi
 * /{{pluralize (kebabCase name)}}/{id}:
 *   put:
 *     summary: Update {{lowerCase name}}
 *     tags: [{{pascalCase name}}]
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             $ref: '#/components/schemas/Update{{pascalCase name}}'
 *     responses:
 *       200:
 *         description: {{pascalCase name}} updated
 *       404:
 *         description: {{pascalCase name}} not found
 */
router.put(
  '/:id',
  {{#if auth}}authMiddleware(),{{/if}}
  {{#if validation}}validate({{camelCase name}}Schema.update),{{/if}}
  controller.update.bind(controller)
)

/**
 * @openapi
 * /{{pluralize (kebabCase name)}}/{id}:
 *   delete:
 *     summary: Delete {{lowerCase name}}
 *     tags: [{{pascalCase name}}]
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         schema:
 *           type: string
 *     responses:
 *       204:
 *         description: {{pascalCase name}} deleted
 *       404:
 *         description: {{pascalCase name}} not found
 */
router.delete(
  '/:id',
  {{#if auth}}authMiddleware(),{{/if}}
  controller.delete.bind(controller)
)

export { router as {{camelCase name}}Router }
